# Copyright 2000, International Business Machines Corporation and others.
# All Rights Reserved.
# 
# This software has been released under the terms of the IBM Public
# License.  For details, see the LICENSE file in the top-level source
# directory or online at http://www.openafs.org/dl/license10.html

PACKAGE=@PACKAGE@
VERSION=@VERSION@
VERSFILE=AFS_component_version_number

$(VERSFILE).o: $(VERSFILE).c

$(VERSFILE).c: @TOP_OBJDIR@/src/config/Makefile.version
	echo 'char cml_version_number[]="@(#) OpenAFS ${VERSION} built ' `date +"%Y-%m-%d"` '";' >$(VERSFILE).c
	echo 'char* AFSVersion = "${PACKAGE} ${VERSION}"; ' >>$(VERSFILE).c

$(VERSFILE).xml:
	echo '<?xml version="1.0" encoding="UTF-8"?>' >$(VERSFILE).xml
	echo '<revision>' >>$(VERSFILE).xml
	echo '<revnumber>${VERSION}</revnumber>' >>$(VERSFILE).xml
	echo '</revision>' >>$(VERSFILE).xml
